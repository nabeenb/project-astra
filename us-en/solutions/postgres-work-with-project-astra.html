<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Work With Postgres on Astra</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Work With Postgres on Astra" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/project-astra/us-en/solutions/postgres-work-with-project-astra.html" />
	<meta property="og:description" content="Learn how to deploy Postgres from a Helm chart" />
  <meta property="og:image" content="https://docs.netapp.com/project-astra/us-en/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="Learn how to deploy Postgres from a Helm chart">
  <meta name="keywords" content=" ">
  
  <meta name="robots" content="noindex" />
  
  

  <!-- Icons -->
  <link rel="icon" href="/project-astra/us-en/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/project-astra/us-en/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/project-astra/us-en/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/project-astra/us-en/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/project-astra/us-en/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/project-astra/us-en/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/project-astra/us-en/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/project-astra/us-en/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/project-astra/us-en/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/project-astra/us-en/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/project-astra/us-en/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/project-astra/us-en/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/project-astra/us-en/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/project-astra/us-en/css/astra.css" type="text/css">
  

  
  <link rel='stylesheet' href='/project-astra/us-en/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/project-astra/us-en/js/na-search.js'></script>
  

  
  <script src='/project-astra/us-en/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/project-astra/us-en/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/project-astra/us-en/css/prism-netapp.css' type='text/css'>


<script src='/project-astra/us-en/js/na-utility.js'></script>
  <script src='/project-astra/us-en/js/clouddocs.js'></script>
  
  <script src="//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js" async></script>
  

  <script src='/project-astra/us-en/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/project-astra/us-en/js/toc.js'></script>
  <script src='/project-astra/us-en/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    
    var siteLocales = [];
    
      siteLocales.push("us-en");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
    
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/project-astra/us-en/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/project-astra/us-en/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/project-astra/us-en/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search"></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-property-bar__toolbar"><!-- Start Language Selector -->
      <div id="ie-i18n" class="n-property-bar__lang-selector">
        <div id="ie-i18n-menu">
        <span class="ie-i18n-lang">English</span>
          <button class="ie-i18n-icon-container" type="button">
            <svg class="n-globe__icon" aria-labelledby="title">
              <title>globe</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#globe"></use>
            </svg>
          </button>
        </div>

        <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
          <div class="n-language-selector-menu">
            <div class="n-language-selector-menu__header">
              <span class="n-language-selector-menu__title">Select Your Language</span>
            </div>
            <ul class="n-menu__list">
              <li class="n-menu__list-column">
                <ul class="n-menu__list">
                  
                  
                  
                  
                  <li class="n-menu__list-item n-menu__list-item--level-1">
                    <a href="/project-astra/us-en/" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                  </li>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                </ul>
              </li>
            </ul>
            <div class="menu__footer">
              <p>Current Language: English
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- End Language Selector -->

      <div class="n-property-bar__cta"></div>
    </div>

    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/project-astra/us-en/">Project&nbsp;Astra</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Work With Postgres on Astra
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">
    Download PDF
    <span>
      <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">
        Site
      </span>
    </div>
    <li>
      <a target="_blank" href="/project-astra/us-en/pdfs/fullsite-sidebar/Astra_Documentation_for_the_Beta_release.pdf" >
        <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
        Astra Documentation for the Beta release
      </a>
    </li>
  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              
                Sections
              
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Get_started.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Get started
          </a>
        </li>
        <span>
          
  


  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Release_notes.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Release notes
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Get_started_with_Astra.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Get started with Astra
          </a>
        </li>
        <span>
          
  


  


  


  


  


  


  




          
        </span>
      </span>
    

  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              
                Sections
              
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Use_Project_Astra.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Use Project Astra
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Manage_and_protect_apps.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Manage and protect apps
          </a>
        </li>
        <span>
          
  


  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/View_app_and_cluster_health.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            View app and cluster health
          </a>
        </li>
        <span>
          
  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Manage_your_account.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Manage your account
          </a>
        </li>
        <span>
          
  


  


  




          
        </span>
      </span>
    

  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              
                Sections
              
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Learn.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Learn
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              
                Sections
              
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Solutions.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Solutions
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/MySQL_MariaDB.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            MySQL/MariaDB
          </a>
        </li>
        <span>
          
  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Postgres.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Postgres
          </a>
        </li>
        <span>
          
  


  
    <div class="n-pdf-section">
  <span class="n-pdf-section-title">
    This page
  </span>
</div>

<li class="active">
  <a target="_blank" href="/project-astra/us-en/pdfs/pages/solutions/postgres-work-with-project-astra.pdf" >
    <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
    Work With Postgres on Astra
  </a>
</li>


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Jenkins.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Jenkins
          </a>
        </li>
        <span>
          
  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              
                Sections
              
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/project-astra/us-en/pdfs/sidebar/Knowledge_and_support.pdf" >
            <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/>
            Knowledge and support
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  


  


</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/index.html">
        Astra docs
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Get started</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/intro.html">
        Intro to Astra
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/join-beta.html">
        Join the Beta release
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Release notes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/known-issues.html">
        Known issues
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/known-limitations.html">
        Known limitations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Get started with Astra</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/quick-start.html">
        Quick start
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/requirements.html">
        Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/set-up-google-cloud.html">
        Set up Google Cloud
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/cloud-central.html">
        Sign up to Cloud Central
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/invitation.html">
        Accept your Beta invitation
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/add-first-cluster.html">
        Add your first cluster
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/whats-next.html">
        What's next?
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/videos.html">
        Videos
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/get-started/faq.html">
        FAQ
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use Project Astra</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Manage and protect apps</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/manage-apps.html">
        Start managing apps
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/protect-apps.html">
        Protect apps
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/restore-apps.html">
        Restore apps
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/clone-apps.html">
        Clone and migrate apps
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> View app and cluster health</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/view-dashboard.html">
        Dashboard summary
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/view-clusters.html">
        Cluster health and details
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/view-apps.html">
        App health and details
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Manage your account</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/manage-users.html">
        Invite and manage users
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/manage-credentials.html">
        Manage cloud provider credentials
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/manage-notifications.html">
        Manage notifications
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/use/unmanage.html">
        Unmanage apps and clusters
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Learn</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/learn/validated-vs-standard.html">
        Validated vs Standard Apps
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/learn/define-custom-app.html">
        Define a Custom App
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Solutions</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> MySQL/MariaDB</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/mariadb-deploy-from-helm-chart.html">
        Deploy MariaDB from Helm
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/mysql-deploy-from-helm-chart.html">
        Deploy MySQL from Helm
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/mysql-mariadb-work-with-project-astra.html">
        Work With MySQL/MariaDB on Project Astra
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Postgres</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/postgres-deploy-from-helm-chart.html">
        Deploy Postgres from Helm
      </a></li><li class="  active "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/postgres-work-with-project-astra.html">
        Work With Postgres on Project Astra
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Jenkins</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/solutions/jenkins-deploy-from-helm-chart.html">
        Deploy Jenkins from Helm
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Knowledge and support</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/support/register-support.html">
        Register for support
      </a></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/support/get-help.html">
        Get help
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/project-astra/us-en/legal-notices.html">
        Legal notices
      </a></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Work With Postgres on Astra</h1>
</div>

<p class="page-details">
  
    
    <time datetime="2020-11-11 14:27:52 +0000">11/11/2020</time>
    
  

<span>Contributors
  
  <a target="_blank" href="https://github.com/ebarcott">
    <img  class="avatar avatar-small"
          alt="ebarcott"
          width="20" height="20"
          src="https://avatars3.githubusercontent.com/u/44878916?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" href="https://github.com/netapp-bcammett">
    <img  class="avatar avatar-small"
          alt="netapp-bcammett"
          width="20" height="20"
          src="https://avatars3.githubusercontent.com/u/18287750?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


  <span>
    <a target="_blank" href="/project-astra/us-en/pdfs/pages/solutions/postgres-work-with-project-astra.pdf" role="button">
      <img src="/project-astra/us-en/images/pdf.png" width="20" height="20"/> Download PDF of this page
    </a>
  </span>


</p>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide focuses on Helm as the preferred way to deploy Postgres apps. Plain YAML and Operator-based deployments may be covered in future guides.</p>
</div>
<div class="paragraph">
<p>For express instructions on launching Postgres on Astra, see <a href="postgres-deploy-from-helm-chart.html">Deploy Postgres from a Helm Chart</a>.</p>
</div>
<div class="paragraph">
<p>Postgres is a validated app for the Astra Beta program. <a href="../learn/validated-vs-standard.html">Learn the difference between Validated and Standard apps</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Postgres 11.7 is the only version supported in the Astra beta program.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements">Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to deploy Postgres from a Helm chart on a cluster registered with Astra, you will need the following:</p>
</div>
<div class="paragraph">
<p><strong>GKE Cluster</strong></p>
</div>
<div class="paragraph">
<p>An up-to-date Kubernetes cluster (version 1.17+) which is connected to Astra. For help creating your GKE cluster and connecting it to Astra, see the <a href="getting-started.html">Getting Started Guide</a>.</p>
</div>
<div class="paragraph">
<p><strong>Kubectl</strong></p>
</div>
<div class="paragraph">
<p>Kubectl is a standard tool for interacting with Kubernetes. For more information, see the guide <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Install and Set Up kubectl</a> in the official Kubernetes documentation.</p>
</div>
<div class="paragraph">
<p><strong>Kubeconfig</strong></p>
</div>
<div class="paragraph">
<p>The Kubeconfig file contains the credentials which let kubectl communicate with your Kubernetes cluster. to learn how to download your GKE Kubeconfig file, see the Google Cloud guide for <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#generate_kubeconfig_entry">configuring cluster access for kubectl</a>.</p>
</div>
<div class="paragraph">
<p><strong>CVS and Cloud Central</strong></p>
</div>
<div class="paragraph">
<p>CVS and Cloud Central are the storage layer and connective elements for Astra, respectively. More details on how to configure CVS on GCP may be found in the <a href="https://cloud.google.com/solutions/partners/netapp-cloud-volumes/workflow">workflow guide for CVS</a>.</p>
</div>
<div class="paragraph">
<p><strong>Helm (v3)</strong></p>
</div>
<div class="paragraph">
<p>Helm is a popular way to organize and install apps on Kubernetes. To install Helm on your local computer, follow <a href="https://helm.sh/docs/intro/install/">their handy install guide</a>.</p>
</div>
<div class="sect2">
<h3 id="postgres-requirements">Postgres Requirements</h3>
<div class="paragraph">
<p>For a Posgres application, Astra Alpha requires:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>global.storageClass</code> value to be set to the storageClass representing either CVS or Trident (or, that storageClass is set as your cluster&#8217;s default provisioner).</p>
</li>
<li>
<p>The namespace set to something other than default, using the <code>--namespace</code> argument.</p>
</li>
<li>
<p>A single node deployment. Multi-node and HA deployments will be supported in future releases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Astra alpha program does not support replicas or failovers. Only single instance versions of the databases are supported. For testing Astra in Alpha, leave replication off, and check that the <code>global.storageClass</code> value in <code>values.yaml</code> is pointing to the correct storageClass.</p>
</div>
</div>
<div class="sect2">
<h3 id="namespace-requirements">Namespace Requirements</h3>
<div class="paragraph">
<p><strong>You must deploy your app in a namespace other than the default.</strong> In the following example, we create and use the namespace <code>testdb</code> for the deployment.</p>
</div>
<div class="paragraph">
<p><strong>A namespace which is empty for more than 60 seconds will be ignored by Astra.</strong> Thus, you want to be sure to deploy your app into your namespace within one minute after you create the namespace.</p>
</div>
<div class="paragraph">
<p>In the following example, we use <code>&amp;&amp;</code> to concatenate the commands for creating the namespace and deploying the app. We recommend this approach, as it ensures the commands are run in sequence even if you get interrupted.</p>
</div>
<div class="paragraph">
<p>We recommend the use of <code>&amp;&amp;</code> instead of <code>;</code> to concatenate commands. <code>&amp;&amp;</code> is conditional, and only runs the second command if the first command completes successfully.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-psql-on-astra">Using psql on Astra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the Astra alpha program, if you need to perform operations on Postgres pods (such as creating or restoring from backup), be sure to exit out of the psql client if you are using it on the pod.</p>
</div>
<div class="paragraph">
<p>Astra requires psql access to freeze and thaw the databases. If there is a pre-existing connection the snapshot/backup/clone operation will fail.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-postgres">Install Postgres</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the Astra alpha program, we recommend the <a href="https://hub.helm.sh/charts/bitnami/postgresql">Bitnami Postgres chart</a>. To install this chart, see <a href="postgres-deploy-from-helm-chart.html">Deploy Postgres from a Helm Chart</a>.</p>
</div>
<div class="paragraph">
<p>The values need to be set to consume the volumes provisioned by CVS, be deployed in a namespace other than default, and your stateful app needs to be available to Astra.</p>
</div>
<div class="paragraph">
<p>By default the Bitnami Postgres chart uses a cluster&#8217;s default dynamic provisioner. Since Trident (part of Astra) automatically sets CVS as the default storage class, you should be in good shape. Use <code>kubectl get sc</code> to see what your cluster&#8217;s storageClasses are. This produces output like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                           PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
netapp-cvs-extreme             csi.trident.netapp.io   Delete          Immediate           true                   26h
netapp-cvs-premium (default)   csi.trident.netapp.io   Delete          Immediate           true                   26h
netapp-cvs-standard            csi.trident.netapp.io   Delete          Immediate           true                   26h
standard                       kubernetes.io/gce-pd    Delete          Immediate           true                   27h</pre>
</div>
</div>
<div class="paragraph">
<p>You have two options for changing settings in your <code>values.yaml</code>. The first option is to open the file and edit it directly. The second option is to add an extra argument to your usual Helm CLI command.</p>
</div>
<div class="paragraph">
<p>To view and export <code>values.yaml</code>, use the <code>helm show</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>helm show values bitnami/postgresql</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>helm show values bitnami/postgresql &gt; my-values.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>This creates a <code>my-values.yaml</code> file in your local directory. That file is a copy of the official <code>values.yaml</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dry-run">Dry Run</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before deploying, you can do a dry run to make sure everything is set up correctly.</p>
</div>
<div class="paragraph">
<p>To do this, edit the values in the <code>my-values.yaml</code> file you created in the previous step. Test your deployment using the <code>-f my-values.yaml</code> and <code>--dry-run</code> flags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>helm install -f my-values.yaml --namespace testdb --generate-name bitnami/postgresql --dry-run</pre>
</div>
</div>
<div class="paragraph">
<p>If the output from our dry run looks correct, we may deploy to your cluster by removing <code>--dry-run</code>.</p>
</div>
<div class="paragraph">
<p>Before we can run the helm charts for real, we need to first create the namespace. We&#8217;ve chosen <code>testdb</code> and may use kubectl to create that namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl create namespace testdb &amp;&amp; helm install -f my-values.yaml --namespace testdb --generate-name bitnami/postgresql</pre>
</div>
</div>
<div class="paragraph">
<p>After the Helm chart is deployed, it will be automatically detected by Astra, at which point you can register the app with Astra. Please note that for the Astra alpha program, installed applications can take up to 5 minutes to show up in the Discovered Applications list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-test-data">Generate test data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Helm provides instructions for connecting to newly-installed Postgres apps. These instructions should contain a few different methods for connecting to the database.</p>
</div>
<div class="paragraph">
<p>This process is also discussed <a href="https://www.postgresql.org/docs/11/functions-srf.html">here in the Postgres documentation</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NOTES:
** Please be patient while the chart is being deployed **
PostgreSQL can be accessed via port 5432 on the following DNS name from within your cluster:
    postgresql-1591290927.longship.svc.cluster.local - Read/Write connection
To get the password for "postgres" run:
    export POSTGRES_PASSWORD=$(kubectl get secret --namespace longship postgresql-1591290927 -o jsonpath="{.data.postgresql-password}" | base64 --decode)
To connect to your database run the following command:
    kubectl run postgresql-1591290927-client --rm --tty -i --restart='Never' --namespace longship --image docker.io/bitnami/postgresql:11.8.0-debian-10-r19 --env="PGPASSWORD=$POSTGRES_PASSWORD" --command -- psql --host postgresql-1591290927 -U postgres -d postgres -p 5432
To connect to your database from outside the cluster execute the following commands:
    kubectl port-forward --namespace longship svc/postgresql-1591290927 5432:5432 &amp;
    PGPASSWORD="$POSTGRES_PASSWORD" psql --host 127.0.0.1 -U postgres -d postgres -p 5432</pre>
</div>
</div>
<div class="paragraph">
<p>From your own instructions, copy the line below <code>To get the password for "postgres" run:</code> and run it. Next, copy the lines below <code>To connect to your database run the following command:</code> and run them.</p>
</div>
<div class="paragraph">
<p>This will put you in the psql command line tool. Using psql, you may generate test data for testing Astra snapshot, clone, and restore features.</p>
</div>
<div class="paragraph">
<p>An example chunk of SQL that generates 10,000 rows is included in this guide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-- create a db
CREATE DATABASE astra_test_db;
-- connect to it
\c astra_test_db;
-- create a table
CREATE TABLE junk(
  id      SERIAL PRIMARY KEY,
  title   VARCHAR(32) NOT NULL UNIQUE
);
-- insert 10,000 rows into the table
INSERT INTO junk (
    title
)
SELECT md5(i::text)
FROM generate_series(1, 10000) g_s(i);
-- check that data looks correct
SELECT * FROM junk LIMIT 20;</pre>
</div>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/project-astra/blob/master/solutions/postgres-work-with-project-astra.adoc" class="btn btn-default githubEditButton" role="button"><img src="/project-astra/us-en/images/github.png" class="github-icon" /> Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/project-astra/issues/new?body=Page%3A%20[Work With Postgres on Astra](https://docs.netapp.com/us-en/project-astra/solutions/postgres-work-with-project-astra.html)" class="btn btn-default githubEditButton" role="button"><img src="/project-astra/us-en/images/github.png" class="github-icon" /> Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">Â© 2020 NetApp</a>
            </li>
            <li class="n-footer__language">
              <!-- <a class="n-footer__corp-link modaal" href="#n-language-selector-menu" data-modaal-scope="modaal_154143812867626e487b1a03c9"> -->
              <a class="n-footer__corp-link modaal" href="#n-language-selector-menu">
                <svg class="n-icon-baseline-language" aria-labelledby="title">
                  <title>netapp-globe</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#globe"></use>
                </svg>
                English
              </a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/project-astra/us-en/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">


  Have feedback for our website?

  <a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/project-astra/us-en/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/project-astra/us-en/js/prism.js'></script>
      <script type="text/javascript" src='/project-astra/us-en/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/project-astra/us-en/js/www-ntap.js'></script>
  </body>

  
</html>
